Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project lead id,Project description,Project url,Priority,Resolution,Assignee,Assignee Id,Reporter,Reporter Id,Creator,Creator Id,Created,Updated,Last Viewed,Resolved,Due date,Votes,Labels,Description,Environment,Watchers,Watchers,Watchers Id,Watchers Id,Original estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Cloners),Attachment,Attachment,Custom field (AIF External Dependency),Custom field (AIF Innovation Potential),Custom field (AIF Sufficiency),Custom field (AIF Value),Custom field (Acceptance Criteria),Custom field (Affected services),Custom field (Audience Segment ID),Custom field (Audience Type),Custom field (BCA Started),Custom field (Baseline end date),Custom field (Baseline start date),Custom field (Benefit hypothesis),Custom field (Business Value [MM$]),Custom field (CSE FTE Engaged),Custom field (Categories | Regions),Custom field (Category),Custom field (Chance of success),Custom field (Change completion date),Custom field (Change reason),Custom field (Change risk),Custom field (Change start date),Custom field (Change type),Custom field (Committed),Custom field (Compass),Custom field (Concerned Jira or Confluence URLs),Custom field (Concerned users - P&G shortnames only),Custom field (DS ELT Contact),Custom field (Dependency Status),Custom field (Dependency Type),Custom field (Development),Custom field (Domain),Custom field (End date),Custom field (Epic Color),Custom field (Epic Link),Epic Link Summary,Custom field (Epic Name),Custom field (Epic Status),Custom field (Facebook Ad Account),Custom field (Have you read the documentation?),Custom field (Impact),Custom field (Issue color),Custom field (Key Sponsor),Custom field (Lead DS),Custom field (Locked forms),Custom field (Model Risk Officer),Custom field (NSR Jira Ticket),Custom field (Needed by),Custom field (Open forms),Custom field (Persons requiring access or project admins (P&G emails are required!)),Custom field (Rank),Custom field (Request Type),Custom field (Request language),Custom field (Request participants),Custom field (Requesting team),Custom field (Requestor),Custom field (Risk),Satisfaction rating,Custom field (Stage),Custom field (Start date),Custom field (Story Points),Custom field (Story point estimate),Custom field (Submitted forms),Custom field (Success Metris),Custom field (Target end),Custom field (Target start),Custom field (Task progress),Custom field (Team),Custom field (Tier),Custom field (Time to first response),Custom field (Time to resolution),Custom field (Total forms),Custom field (Type of Product),Custom field (Value),Custom field (What is your issue about?),Custom field ([CHART] Date of First Response),Custom field (itAccess group to map),Comment,Comment,Comment,Comment,Comment,Parent,Parent summary,Status Category
Knowledge sharing with Aleksander Kamczyc regarding AIF AKS clusters,ITS-206,135247,Story,In Progress,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,26/Jun/23 6:07 AM,26/Jun/23 6:08 AM,28/Jun/23 7:00 AM,,,0,,,,Szymon Osiecki,,61029d08627b560068c8a078,,,,,,,,,,ITS-207,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-9,AzMLOps other tasks,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0fsp7:,,,,,,,,,,,,,,,,,,,,,,,,Something else,,,,,,,,116906,AzMLOps other tasks,In Progress
Investigate the issue with prod AKS cluster attachment in AML,ITS-204,135031,Story,In Progress,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,23/Jun/23 5:40 AM,23/Jun/23 8:41 AM,28/Jun/23 7:00 AM,,,0,,"""[shared-k8s - Azure AI | Machine Learning Studio|https://ml.azure.com/compute/shared-k8s/details?wsid=/subscriptions/4a4e68bf-6a30-454d-ab2d-3bc514a605d7/resourcegroups/AZ-RG-AIP-MLWDEV22JUNE6/providers/Microsoft.MachineLearningServices/workspaces/mlwdev22june6&tid=3596192b-fdf5-4e2c-a6fa-acb706c963d8]"
""
{{Provisioning error}}
""
{{The Azure Machine Learning extension is not installed in this cluster: /subscriptions/4a4e68bf-6a30-454d-ab2d-3bc514a605d7/resourceGroups/AZ-RG-AIF-AKS-MT-EastUS2-Prod/providers/Microsoft.ContainerService/managedClusters/aks-aif-mt-prod-5f94}}
""
The attachment was still working fine on June 13th:
""
"[https://ml.azure.com/compute/aks-aif-mt-prod/details?wsid=/subscriptions/4a4e68bf-6a30-454d-ab2d-3bc514a605d7/resourcegroups/az-rg-api-mlwpyrogaidevel/providers/Microsoft.MachineLearningServices/workspaces/mlwpyrogaidevel&tid=3596192b-fdf5-4e2c-a6fa-acb706c963d8|https://ml.azure.com/compute/aks-aif-mt-prod/details?wsid=/subscriptions/4a4e68bf-6a30-454d-ab2d-3bc514a605d7/resourcegroups/az-rg-api-mlwpyrogaidevel/providers/Microsoft.MachineLearningServices/workspaces/mlwpyrogaidevel&tid=3596192b-fdf5-4e2c-a6fa-acb706c963d8]""",,Szymon Osiecki,,61029d08627b560068c8a078,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-3,Central Kubernetes compute for training and inference,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0frgz:,,,,,,,,,,,,,,,,,,,,,,,,Something else,,,,,,,,116882,Central Kubernetes compute for training and inference,In Progress
Determine if it is possible to download pod image using workload identity,ITS-193,134137,Story,In Progress,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,15/Jun/23 1:44 PM,20/Jun/23 4:55 AM,16/Jun/23 5:34 AM,,,0,,"""Determine", if it is possible, to download the image for the pod from Azure Container Registry using the workload identity.
""
From my limited testing, it doesn’t work. We’re using the UAMI for the AML workspace, e.g. [mlwakstest3-uami - Microsoft Azure|https://portal.azure.com/#@pgone.onmicrosoft.com/resource/subscriptions/27c0a03b-f477-4c6d-b9a9-608e91d2e83b/resourceGroups/AZ-RG-AIP-MLWAKSTEST3/providers/Microsoft.ManagedIdentity/userAssignedIdentities/mlwakstest3-uami/overview], which does have AcrPull role on the ACR: 
""
!image-20230615-174618.png|width=1224,height=364!
""
but it cannot download the image from this ACR for a pod created in {{pg-de-cf-project-aks3}} namespace on the {{aks-aif-mt-dev-2924}} even if we specify in the pod to use the workload identity, using the UAMI
""
{code:yaml}apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    azure.workload.identity/client-id: 58922a6a-8a36-4ea6-ae60-7af314a1b329
"  creationTimestamp: """"2023-06-15T17:10:47Z"""""
  labels:
"    azure.workload.identity/use: """"true"""""
    kustomize.toolkit.fluxcd.io/name: app-of-apps-apps
    kustomize.toolkit.fluxcd.io/namespace: app-of-apps
  name: workload-sa
  namespace: pg-de-cf-project-aks3{code}
""
!image-20230615-174901.png|width=1250,height=247!
""
Determine. If it is possible, to download the image using workload identity, otherwise we need to implement this solution, for the ACR authentication, using AcrPull token:
""
"[https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/|https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/|smart-link] """,,kamil gajek,Szymon Osiecki,61d425a20586a2006949ffee,61029d08627b560068c8a078,,,,,,,,,ITS-194,15/Jun/23 1:50 PM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230615-174618.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/23600,15/Jun/23 1:50 PM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230615-174901.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/23599,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-3,Central Kubernetes compute for training and inference,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0fmfn:,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-06-20 08:35:19.122,,"""20/Jun/23 4:35 AM;61d425a20586a2006949ffee;I think that we need add more information to deployments or pod to use WI"
""
""
""
{noformat}apiVersion: v1
kind: Pod
metadata:
  name: quick-start
  namespace: ${SERVICE_ACCOUNT_NAMESPACE}
  labels:
"    azure.workload.identity/use: """"true"""" # <- needed labels on pod level"
spec:
  serviceAccountName: ${SERVICE_ACCOUNT_NAME} # <- specified SA for authentication.
  containers:
    - image: ghcr.io/azure/azure-workload-identity/msal-go
      name: oidc
      env:
      - name: KEYVAULT_URL
        value: ${KEYVAULT_URL}
      - name: SECRET_NAME
        value: ${KEYVAULT_SECRET_NAME}{noformat}
""
""
this procedure is described here
""
[https://learn.microsoft.com/en-us/samples/azure-samples/azure-ad-workload-identity-mi/azure-ad-workload-identity-mi/|https://learn.microsoft.com/en-us/samples/azure-samples/azure-ad-workload-identity-mi/azure-ad-workload-identity-mi/|smart-link] 
""
"[https://learn.microsoft.com/en-us/azure/aks/learn/tutorial-kubernetes-workload-identity#deploy-the-workload|https://learn.microsoft.com/en-us/azure/aks/learn/tutorial-kubernetes-workload-identity#deploy-the-workload|smart-link] ""","""20/Jun/23 4:55 AM;61d425a20586a2006949ffee;in deployments can use"
""
""
{code:yaml}apiVersion: apps/v1
kind: Deployment
metadata:
    name: apps-name
    namespace: namespace-name
    labels:
"      azure.workload.identity/use: """"true"""""
      app: app-label
spec:
  replicas: 1
  selector:
    matchLabels:
      app: app-label
"      azure.workload.identity/use: """"true""""    "
  template:
    metadata:
      labels:
"        azure.workload.identity/use: """"true""""      "
        app: app-label
    spec:
      serviceAccountName: ${SERVICE_ACCOUNT_NAME} # <- specified SA for authentication.
      containers:
"      ...{code}""",,,,116882,Central Kubernetes compute for training and inference,In Progress
Investigate issues with pipelines terminated with -9 sigkill,ITS-175,131986,Story,In Progress,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,06/Jun/23 5:35 AM,07/Jun/23 5:41 AM,28/Jun/23 7:00 AM,,,0,,[APE-9999: Test pipe 2 · procter-gamble/de-cf-pyrogai@ec54609 (github.com)|https://github.com/procter-gamble/de-cf-pyrogai/actions/runs/5160211177/jobs/9320154164?pr=455],,Szymon Osiecki,,61029d08627b560068c8a078,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-4,AKS GHAR cluster updates for AMJ.23,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0fa0b:,,,,,,,,,,,,,,,,,,,,,,,,Something else,,,07/Jun/23 5:41 AM;61029d08627b560068c8a078;[APE-9999: Test pipe 2 · procter-gamble/de-cf-pyrogai@ec54609 (github.com)|https://github.com/procter-gamble/de-cf-pyrogai/actions/runs/5160211177/jobs/9374553442],,,,,116886,AKS GHAR cluster updates for AMJ.23,In Progress
Investigate Experimental Secrets on Kubernetes,ITS-163,130651,Story,Done,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,Done,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,29/May/23 5:59 AM,02/Jun/23 5:56 AM,05/Jun/23 4:52 AM,02/Jun/23 5:56 AM,,0,,Contact Maciej Filocha/Nikolas Giannakis/Atul Modi and ask how to use those experimental secrets.,,kamil gajek,Szymon Osiecki,61d425a20586a2006949ffee,61029d08627b560068c8a078,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-3,Central Kubernetes compute for training and inference,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0f2mj:,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-06-02 07:28:39.362,,"""02/Jun/23 3:28 AM;61d425a20586a2006949ffee;Boglarka", Papp [Non-PG]
""
in this was k8s secret cannot be use as certificate
""
"let me investigate if there is an possibility to configure another way with external secrets""",,,,,116882,Central Kubernetes compute for training and inference,Done
Migrate pypi.org Jrfog mirror to prod cluster,ITS-34,117003,Story,Blocked,ITS,AI Factory ITS,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,kamil gajek,61d425a20586a2006949ffee,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,22/Mar/23 8:45 AM,20/Jun/23 6:14 AM,28/Jun/23 7:00 AM,,,0,AzureCloud,"""Migrate dnh-ipa-secret and pypi-pg-com certificates from kvaksmlopsv2us2npf640 for:"
""
* [pypi.pg.com|http://pypi.pg.com]
* [dnh-api.pg.com|http://dnh-api.pg.com]
""
to new cluster.
""
Contact owners (pypi: Kłos Piotr, dnh: Berzano Dario) if they're going to setup dev/test applications, if so, request new certificates for dev/test domains. If not, cooperate if we want to deploy to test cluster or directly to prod one.
""
"Create a secret for [pypi.pg.com|http://pypi.pg.com] and [dnh.pg.com|http://dnh.pg.com] with full chain certificate.""",,kamil gajek,Szymon Osiecki,61d425a20586a2006949ffee,61029d08627b560068c8a078,,,,,,,,,ITS-84,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITS-3,Central Kubernetes compute for training and inference,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0cw12:r,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-05-17 09:23:51.008,,25/Apr/23 5:53 AM;61029d08627b560068c8a078;Create {{aks-aif-mt-prod-5f94-uami}} managed identity. Use it if jfrog maintainers insist of using our KV for storing jfrog tokens. Otherwise use {{aks-aif-mt-prod-jfrog-mirror-uami}} for authentication to their KV,"""17/May/23 5:23 AM;61d425a20586a2006949ffee;dnh - excluded from migration - application not use on our old cluster."
"Rafał Trojak  - conntact person for migration jfrog-mirror""","""19/May/23 6:39 AM;61029d08627b560068c8a078;Please try to find out", who is managing the [pypi.pg.com|http://pypi.pg.com] DNS host registration (Rafał Trojak," Michele Floris?)""","""19/May/23 8:53 AM;61d425a20586a2006949ffee;Attempts to contact remained unanswered"
"new ip for [pypi.pg.com|http://pypi.pg.com] is: 10.121.52.34""","""20/Jun/23 6:14 AM;61029d08627b560068c8a078;PR created"
""
"[ITS-34: feat: migrate jfrog-mirror to aif-mt cluster by szymonos · Pull Request #476 · procter-gamble/de-cf-pyrogai (github.com)|https://github.com/procter-gamble/de-cf-pyrogai/pull/476]""",116882,Central Kubernetes compute for training and inference,In Progress
""
