Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project lead id,Project description,Project url,Priority,Resolution,Assignee,Assignee Id,Reporter,Reporter Id,Creator,Creator Id,Created,Updated,Last Viewed,Resolved,Due date,Votes,Description,Environment,Watchers,Watchers,Watchers Id,Watchers Id,Original estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Relates),Attachment,Attachment,Attachment,Custom field (AIF External Dependency),Custom field (AIF Innovation Potential),Custom field (AIF Sufficiency),Custom field (AIF Value),Custom field (Acceptance Criteria),Custom field (Affected services),Custom field (Audience Segment ID),Custom field (Audience Type),Custom field (BCA Started),Custom field (Baseline end date),Custom field (Baseline start date),Custom field (Benefit hypothesis),Custom field (Business Value [MM$]),Custom field (CSE FTE Engaged),Custom field (Categories | Regions),Custom field (Category),Custom field (Chance of success),Custom field (Change completion date),Custom field (Change reason),Custom field (Change risk),Custom field (Change start date),Custom field (Change type),Custom field (Committed),Custom field (Compass),Custom field (Concerned Jira or Confluence URLs),Custom field (Concerned users - P&G shortnames only),Custom field (DS ELT Contact),Custom field (Dependency Status),Custom field (Dependency Type),Custom field (Development),Custom field (Domain),Custom field (End date),Custom field (Epic Color),Custom field (Epic Link),Epic Link Summary,Custom field (Epic Name),Custom field (Epic Status),Custom field (Facebook Ad Account),Custom field (Have you read the documentation?),Custom field (Impact),Custom field (Issue color),Custom field (Key Sponsor),Custom field (Lead DS),Custom field (Locked forms),Custom field (Model Risk Officer),Custom field (NSR Jira Ticket),Custom field (Needed by),Custom field (Open forms),Custom field (Persons requiring access or project admins (P&G emails are required!)),Custom field (Rank),Custom field (Request Type),Custom field (Request language),Custom field (Request participants),Custom field (Requesting team),Custom field (Requestor),Custom field (Risk),Satisfaction rating,Custom field (Stage),Custom field (Start date),Custom field (Story Points),Custom field (Story point estimate),Custom field (Submitted forms),Custom field (Success Metris),Custom field (Target end),Custom field (Target start),Custom field (Task progress),Custom field (Team),Custom field (Tier),Custom field (Time to first response),Custom field (Time to resolution),Custom field (Total forms),Custom field (Type of Product),Custom field (Value),Custom field (What is your issue about?),Custom field ([CHART] Date of First Response),Custom field (itAccess group to map),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Parent,Parent summary,Status Category
#2306200050004038 - Cannot deploy large dolly-12b model to managed online endpoint even with public egress enabled,ITSMS-83,134131,Story,In Progress,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,Jagjeet Singh,5dde91bb7eb2280d03c98dd0,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,15/Jun/23 11:17 AM,20/Jun/23 11:22 AM,20/Jun/23 4:00 AM,,,0,"""[mlwopenaipldev-qofgy - Azure AI | Machine Learning Studio|https://ml.azure.com/endpoints/realtime/mlwopenaipldev-qofgy?wsid=/subscriptions/27c0a03b-f477-4c6d-b9a9-608e91d2e83b/resourcegroups/AZ-RG-AIP-MLWOPENAIPLDEV/providers/Microsoft.MachineLearningServices/workspaces/mlwOpenAIPlDEV&tid=3596192b-fdf5-4e2c-a6fa-acb706c963d8]"
""
!image-20230615-151811.png|width=728,"height=433!""",,Jagjeet Singh,Szymon Osiecki,5dde91bb7eb2280d03c98dd0,61029d08627b560068c8a078,,,,,,,,,,15/Jun/23 11:18 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230615-151811.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/23596,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0e4o5:x,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-06-20 15:22:47.471,,20/Jun/23 11:22 AM;5dde91bb7eb2280d03c98dd0;Case created: [*2306200050004038*|https://portal.azure.com/#view/Microsoft_Azure_Support/SupportRequestDetails.ReactView/id/%2Fsubscriptions%2F27c0a03b-f477-4c6d-b9a9-608e91d2e83b%2Fproviders%2Fmicrosoft.support%2Fsupporttickets%2F2306200050004038]: Managed online endpoint deployment failed even with public egress enabled,,,,,,,124700,Support Tickets,In Progress
#2306160050002835 - Cannot deploy models from model catalog from workspace with public access disabled,ITSMS-82,134126,Story,In Progress,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,Jagjeet Singh,5dde91bb7eb2280d03c98dd0,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,15/Jun/23 10:50 AM,20/Jun/23 11:24 AM,28/Jun/23 9:34 AM,,,0,"""In workspaces with public access disabled", when you’re deploying a managed online endpoint, the public egress is disabled by default, which prevents downloading publicly hosted models from OpenAI/HuggingFace (because egress is disabled).
""
When deploying a model via azure-clie, the public egress is enabled by default even on workspaces with public access disabled, but we don’t know how to deploy OpenAI/HuggingFace models using AzureCLI, so for now, the only way is to enable public access, deploy model from model catalog, disable public access on workspace.
""
!image-20230615-152045.png|width=707,"height=398!""",,Jagjeet Singh,Szymon Osiecki,5dde91bb7eb2280d03c98dd0,61029d08627b560068c8a078,,,,,,,,,,15/Jun/23 11:20 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230615-152045.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/23597,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0e4o5:y,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-06-20 15:24:21.421,,"""15/Jun/23 11:14 AM;61029d08627b560068c8a078;time=""""2023-06-15T15:11:59Z"""" level=info msg=""""trying next host"""" error=""""failed to do request: Head \""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout"""" [host=registry-1.docker.io|http://host=registry-1.docker.io]"
"ctr: failed to resolve reference """"[docker.io/philschmi/huggingface-azure:ubuntu22.04|http://docker.io/philschmi/huggingface-azure:ubuntu22.04]"""": failed to do request: Head """"[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%22:] dial tcp 3.216.34.172:443: i/o timeout"
"{""""level"""":""""[ERROR]""""","""""ts"""":""""Jun  15 15:11:59""""","""""logger"""":""""VMAgent.ImageFetcher""""","""""caller"""":""""imagefetcher/image_fetcher.go:641""""","""""msg"""":""""ctr pull image failed""""","""""imageURL"""":""""[docker.io/philschmi/huggingface-azure:ubuntu22.04""""","""""error"""":""""exit|http://docker.io/philschmi/huggingface-azure:ubuntu22.04%22","%22error%22:%22exit] status 1""""","""""stderr"""":""""time=\""""2023-06-15T15:11:59Z\"""" level=info msg=\""""trying next host\"""" error=\""""failed to do request: Head \\\""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\\\\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%5C%5C%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\"""" [host=registry-1.docker.io|http://host=registry-1.docker.io]\nctr: failed to resolve reference \""""[docker.io/philschmi/huggingface-azure:ubuntu22.04\|http://docker.io/philschmi/huggingface-azure:ubuntu22.04%5C]"""": failed to do request: Head \""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\n""""","""""stacktrace"""":""""[goms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ctrCommandExecutor|http://goms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ctrCommandExecutor]).PullImage\n\t/mnt/vss/_work/1/s/pkg/imagefetcher/image_fetcher.go:641\ngoms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ImageFetcher).PullAllImages.func1.1\n\t/mnt/vss/_work/1/s/pkg/imagefetcher/image_fetcher.go:271\ngoms.io/azureml/mir/mir-vmagent/pkg/common.RetryWithCondition\n\t/mnt/vss/_work/1/s/pkg/common/code_util.go:29\ngoms.io/azureml/mir/mir-vmagent/pkg/common.Retry\n\t/mnt/vss/_work/1/s/pkg/common/code_util.go:22\ngoms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ImageFetcher).PullAllImages.func1\n\t/mnt/vss/_work/1/s/pkg/imagefetcher/image_fetcher.go:269\ngolang.org/x/sync/errgroup.(*Group).Go.func1\n\t/opt/hostedtoolcache/go/1.18.5/x64/pkg/mod/golang.org/x/sync@v0.1.0/errgroup/errgroup.go:75""""}"
"{""""level"""":""""[ERROR]""""","""""ts"""":""""Jun  15 15:11:59""""","""""logger"""":""""VMAgent.ImageFetcher""""","""""caller"""":""""imagefetcher/image_fetcher.go:272""""","""""msg"""":""""Pulling image failed""""","""""error"""":""""NonRetriableError", Reason: ctr pull image failed, Error: exit status 1," details: time=\""""2023-06-15T15:11:59Z\"""" level=info msg=\""""trying next host\"""" error=\""""failed to do request: Head \\\""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\\\\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%5C%5C%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\"""" [host=registry-1.docker.io|http://host=registry-1.docker.io]\nctr: failed to resolve reference \""""[docker.io/philschmi/huggingface-azure:ubuntu22.04\|http://docker.io/philschmi/huggingface-azure:ubuntu22.04%5C]"""": failed to do request: Head \""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\n""""","""""stacktrace"""":""""[goms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ImageFetcher|http://goms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ImageFetcher]).PullAllImages.func1.1\n\t/mnt/vss/_work/1/s/pkg/imagefetcher/image_fetcher.go:272\ngoms.io/azureml/mir/mir-vmagent/pkg/common.RetryWithCondition\n\t/mnt/vss/_work/1/s/pkg/common/code_util.go:29\ngoms.io/azureml/mir/mir-vmagent/pkg/common.Retry\n\t/mnt/vss/_work/1/s/pkg/common/code_util.go:22\ngoms.io/azureml/mir/mir-vmagent/pkg/imagefetcher.(*ImageFetcher).PullAllImages.func1\n\t/mnt/vss/_work/1/s/pkg/imagefetcher/image_fetcher.go:269\ngolang.org/x/sync/errgroup.(*Group).Go.func1\n\t/opt/hostedtoolcache/go/1.18.5/x64/pkg/mod/golang.org/x/sync@v0.1.0/errgroup/errgroup.go:75""""}"
"{""""level"""":""""[ERROR]""""","""""ts"""":""""Jun  15 15:11:59""""","""""logger"""":""""VMAgent.main""""","""""caller"""":""""image-fetcher/main.go:36""""","""""msg"""":""""Pull images failed: NonRetriableError", Reason: ctr pull image failed, Error: exit status 1," details: time=\""""2023-06-15T15:11:59Z\"""" level=info msg=\""""trying next host\"""" error=\""""failed to do request: Head \\\""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\\\\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%5C%5C%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\"""" [host=registry-1.docker.io|http://host=registry-1.docker.io]\nctr: failed to resolve reference \""""[docker.io/philschmi/huggingface-azure:ubuntu22.04\|http://docker.io/philschmi/huggingface-azure:ubuntu22.04%5C]"""": failed to do request: Head \""""[https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04\\"""":|https://registry-1.docker.io/v2/philschmi/huggingface-azure/manifests/ubuntu22.04%5C%5C%22:] dial tcp 3.216.34.172:443: i/o timeout\n""""","""""stacktrace"""":""""main.main.func1\n\t/mnt/vss/_work/1/s/cmd/image-fetcher/main.go:36\nmain.main\n\t/mnt/vss/_work/1/s/cmd/image-fetcher/main.go:61\nruntime.main\n\t/opt/hostedtoolcache/go/1.18.5/x64/src/runtime/proc.go:250""""}""",20/Jun/23 11:24 AM;5dde91bb7eb2280d03c98dd0;Case created: [*2306160050002835*|https://portal.azure.com/#view/Microsoft_Azure_Support/SupportRequestDetails.ReactView/id/%2Fsubscriptions%2F27c0a03b-f477-4c6d-b9a9-608e91d2e83b%2Fproviders%2Fmicrosoft.support%2Fsupporttickets%2F2306160050002835/portalJourney~/true],,,,,,124700,Support Tickets,In Progress
2306140050003160 - ManagedIdentity issue,ITSMS-80,133678,Story,Review,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,14/Jun/23 9:38 AM,22/Jun/23 6:16 AM,16/Jun/23 4:33 AM,,,0,"""[Support Request: ManagedIdentity issue - Microsoft Azure|https://portal.azure.com/#view/Microsoft_Azure_Support/SupportRequestDetails.ReactView/id/%2Fsubscriptions%2F27c0a03b-f477-4c6d-b9a9-608e91d2e83b%2Fproviders%2Fmicrosoft.support%2Fsupporttickets%2F2306140050003160/portalJourney~/true]"
""
h3. Overview
""
|Severity|B - Moderate impact|
|Status|Open|
|Support request ID|2306140050003160|
|Created on|Wed, Jun 14, 2023, 3:35:52 PM|
|Created by|Pawel Borowiak|
|Contact method|Email: [borowiak.p@pg.com|mailto:borowiak.p@pg.com]|
|Support plan|Premier|
""
h3. Details
""
|Type|Technical|
|Subscription|PG-NA-External-NonProd-08|
|Service|Machine Learning|
|Resource|mlwszymonosdev01|
"|Problem type|Job Creation / Debug a failed job|""",,Pawel Borowiak,,6405ed610e0ddcdce18e3980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0e4o5:v,,,,,,,,,,,,,,,,,,,,,,,,Something else,,,16/Jun/23 4:34 AM;6405ed610e0ddcdce18e3980;15/06 Pawel and Jagjeet join the call with support and show the error.,"""16/Jun/23 4:34 AM;6405ed610e0ddcdce18e3980;Hi Pawel and Jagjeet."
""
 
""
Thank you for your time in our Teams session.
""
 
""
"I would like to test the following on your """"default"""" cluster:"
""
# Change the minimum number of nodes to 1 update, and check if it fails to start the node.
""
# Change the number of nodes back to 0 and update.
""
# Remove the managed identity from the cluster and update
""
# Configure back the managed identity and update
""
# Submit the job from the UI
""
 
""
If you are comfortable to do it by yourself, please let me know the results and the associated timestamps.
""
 
""
If not, we can schedule another call. If you are available now, my shift ends in 15 minutes, and we can sync.
""
 
""
We can schedule another call tomorrow. My availability is as follows:
""
    09:15 - 10:15 UTC+1
""
    11:30 - 12:00 UTC+1
""
    14:00 - 17:30 UTC+1
""
 
""
Best regards,
""
"Carlos""","""16/Jun/23 4:35 AM;6405ed610e0ddcdce18e3980;We check the possible solution but it ended up with triggering the same error. "
"Will join on the new meeting with Support""",,,,,124700,Support Tickets,In Progress
#2306020050002329 - Managed Online Deployment shows Failed state,ITSMS-78,131865,Story,Done,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,Done,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,05/Jun/23 6:25 AM,27/Jun/23 6:00 AM,20/Jun/23 6:01 AM,27/Jun/23 6:00 AM,,0,,,Pawel Borowiak,,6405ed610e0ddcdce18e3980,,,,,,,,,,,,,,,,,,Online Deployments to show working status,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0e4o5:r,,,,,,,,,,,,,,,,,,,,,,,,Something else,,,"""06/Jun/23 8:37 AM;6405ed610e0ddcdce18e3980;Hello Pawel", 
""
 
""
Thank you for raising this ticket, My name is Muna and I am here to help you out within this support ticket.
""
 
""
First of all, I am sorry that the issue is not resolved yet. 
""
 
""
 
""
Just to understand the current status at your side and drive the case from where my colleague Adrian left it.
""
Have you followed the action plan shared by our product team and Adrian back then?
""
For your reference, below was the last email sent by Adrian:
""
 
""
 
""
_“Hello Szymon,_
 
_I have an update on this from the Product Team. When reviewing the endpoint from their side, they notice the following error:_
 
_Status Code: 403 Forbidden_
_Error Code: UserError_
_Reason Phrase: Forbidden_
"_Response Body: {""""code"""":""""UserError""""","""""statusCode"""":403","""""message"""":""""Identity(object id: 4c9986f2-c258-4dc1-8a30-b5074518f7da) does not have permissions for Microsoft.MachineLearningServices/workspaces/onlineEndpoints/write actions. Please refer to_ [_https://aka.ms/azureml-auth-troubleshooting_|https://urldefense.com/v3/__https:/aka.ms/azureml-auth-troubleshooting__;!!NgSi4SaN6ydtRVQ-!0UuJuTWMSuh7sZzpcQscvhUMqg-bRKpbqbov4EKILzRZ-5ypBo6aL0uwlqmy4cvk7lH3Z7bmxHDwQENpTnZJYuFNN-w$] _to fix the permissions issue.""""","""""correlation"""":{""""RequestId"""":""""c693e62a-d781-40dd-90d5-d1618de9c9d0""""}}_"
   _at Microsoft.MachineLearning.ManagementFrontEnd.Services.Clients.ModelManagementServiceClient.Execute[T](Func`1 func) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/Services/Clients/ModelManagementServiceClient.cs:line 377_
   _at Microsoft.MachineLearning.ManagementFrontEnd.Services.Clients.ModelManagementServiceClient.ExecuteAsync[T](Func`1 func) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/Services/Clients/ModelManagementServiceClient.cs:line 401_
   _at Microsoft.MachineLearning.ManagementFrontEnd.Services.Clients.ModelManagementServiceClient.PatchOnlineEndpoint(WorkspaceContext2 workspaceContext, String name, JsonPatchDocument`1 request) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/Services/Clients/ModelManagementServiceClient.cs:line 198_
 
_I checked your Azure AD tenant for object ID 4c9986f2-c258-4dc1-8a30-b5074518f7da. I found it is correlated with a resource called “CloudOps-Control-Prod”. Do you have any idea what this is on your end?_
 
_When looking at the Access Control settings for the Workspace, I found that this “CloudOps-Control-Prod” Service Principal is assigned the “PG OpsControl Contributor” role. For deployments to managed online endpoints, we require the full Contributor role on the Resource Group of the Workspace._
 
_Could you test the deployment using a Contributor role assigned on the Resource Group?”_
 
""
I also made another layer of troubleshooting and I was able to find that this app is trying to add tags to the onlineendpoint/deployment. 
""
 
""
"Another solution could also be to deactivate this update on the online endpoint. ""","""06/Jun/23 8:38 AM;6405ed610e0ddcdce18e3980;In response to the points you mention", we are deploying the new endpoints manually using our accounts (They have Owner rights granted on the subscription), rather than the CloudOps-Control-Prod” Service Principal (It is not used to create any endpoints, but to monitor resources deployed in Azure), so we believe that this error is not impacted our case.
""
We can see from our perspective, that we can create the endpoint successfully in the workspace but after approximately 24h, status for endpoint changes from successful to failed.
""
With that we suspect that tags are not responsible for the issue either.
""
"Please let me know if there is anything we can provide for that case?""",07/Jun/23 11:14 AM;6405ed610e0ddcdce18e3980;Internal discussion for Managed Identity and its permissions. ,20/Jun/23 6:01 AM;6405ed610e0ddcdce18e3980;Endopints still working ,"""20/Jun/23 6:01 AM;6405ed610e0ddcdce18e3980;Update from MS side "
As promised, I checked the logs for the latest deployment you’ve done (mlwdevrel750-vkore/ model1-1) at my side, I still see the 409 error upon deployment update for adding tags,
""
As there were plenty of Patch operations triggered between  (2023-06-17T06:11:10.000Z) and (2023-06-17T06:11:20.000Z) causing the 409 error.
""
 
""
However, I don’t see 401 errors anymore by the app,  neither updates on online endpoint level," which seems to have resolved the issue at your side.""",,,124700,Support Tickets,Done
[Lean workspace deployment] - Managed Network Isolation,ITSMS-35,126033,Story,Blocked,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,Pawel Borowiak,6405ed610e0ddcdce18e3980,19/Apr/23 7:40 AM,19/Jun/23 4:40 AM,19/Jun/23 4:40 AM,,,0,"""|h2. We are excited to announce the Private Preview of _Managed Network Isolation_ for release to the AzureML Insiders Program."
*What is this feature?*
With just a few simple steps, this feature streamlines your network isolation experience, speeds up your workspace setup, and frees you from the hassles of virtual network management, private endpoint connections, Vnet inbound/outbound configurations, and integration within your existing network. Enjoy a truly effortless network management experience.
You have two options when choosing a network isolation experience: Private with Internet Outbound, or Private with Approved Outbound. You will have Azure Machine Learning managed VNet to provision your resources.
The Private option strikes a balance between security and usability for your data science. All of your resources will be private, but your ML engineers will still be able to access resources on the internet. On the other hand, the Private + DEP option would be best if you're working with sensitive data and want the highest level of security. This option makes all of your resources private and gives you control over what your ML engineers can access.​
*Who is the target audience for this feature?*
Enterprises who need network isolation for Azure Machine Learning resources
*How do I use and access this feature?*
[_Managed Network Isolation Repo_|https://urldefense.com/v3/__https:/github.com/Azure/azureml-insiders/tree/main/previews/azureml-managed-network-isolation-main__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyiYvZd0BI$]  _>> Private Preview_
_Phase1 page_ [_https://github.com/Azure/azureml-insiders/blob/main/previews/azureml-managed-network-isolation-main/prprph1.md_|https://urldefense.com/v3/__https:/github.com/Azure/azureml-insiders/blob/main/previews/azureml-managed-network-isolation-main/prprph1.md__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyimy3hMAY$]
*How can I provide feedback?*
_Please provide feedback via this_ [_feedback request form_|https://urldefense.com/v3/__https:/forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR3NZX0G6POdDmpxIQWUqHJNURU5OVDlXRlZSNkYzREhONkpDTDVMTjI3Ry4u__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyioGcwiLU$]_. This form is also provided in the ‘_*_azureml-managed-network-isolation-main’ subdirectory for this feature in the private ‘AzureML-Insiders’ GitHub repo. (linked at the bottom of this email)._*
*What if I run into issues while testing the feature?*
_Should you run into issues while using the feature or have any general questions regarding, please email_ [_azuremlpreviews@microsoft.com_|mailto:azuremlpreviews@microsoft.com]_. In your email, please reference the feature you are writing about in the subject line._
Please note that this Private Preview release is subject to the [Microsoft Product Terms|https://urldefense.com/v3/__https:/www.microsoft.com/licensing/terms/welcome/welcomepage__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyi5TtNwfU$] and [Supplemental Terms of Use for Microsoft Azure Previews|https://urldefense.com/v3/__https:/azure.microsoft.com/en-us/support/legal/preview-supplemental-terms/__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyim-e5KD8$]. You are also bound by the NDA which your organization/company has in place with Microsoft.
For additional information regarding this feature, please reference the links and resources provided in the private GitHub repo below or contact [azuremlpreviews@microsoft.com|mailto:azuremlpreviews@microsoft.com].
Follow this [link|https://urldefense.com/v3/__https:/github.com/Azure/azureml-insiders__;!!NgSi4SaN6ydtRVQ-!2MnhtGgMdEHhGz-og9gkUYVepXr5-o32wPSHfU7akBi5oKwT4exc8n74j6DRrCdMAuviwb3BO7FsaGyifsRnU1Q$] to the private AzureML-Insiders GitHub repo. The _‘_*_azureml-managed-network-isolation-main_*_’_ subdirectory can be found under the ‘previews’ folder. If you do not have access," please email [azuremlpreviews@microsoft.com|mailto:azuremlpreviews@microsoft.com].|""",,Pawel Borowiak,Szymon Osiecki,6405ed610e0ddcdce18e3980,61029d08627b560068c8a078,,,,,,,,,ITSMS-47,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-22,Multitenancy Stream,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0ec8y:i,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-04-24 12:38:19.368,,"""24/Apr/23 8:38 AM;61029d08627b560068c8a078;*Email from Microsoft:*"
_While updating the workspace to enable managed network. It was unable to access the KeyVault and the error was unhandled. I think the bug is already fixed with recent builds. The update will be released soon._
""
_Thanks Kevin_
""
"*Waiting for the new release*""",28/Apr/23 6:53 AM;6405ed610e0ddcdce18e3980;Waiting for Kevin Wu to confirm new release if issue is working.,"""08/May/23 3:20 AM;6405ed610e0ddcdce18e3980;We have tested the feature", but it results with the error for us when we tried to run the command:
""
az ml workspace outbound-rule set --resource-group $[rg.name|http://rg.name] --workspace-name $ws --rule MyStorage --type PrivateEndpoint --service-resource-id $[http://sa.id|http://sa.id|smart-link]  --subresource-target blob
""
‘set’ is misspelled or not recognized by the system.
""
"Microsoft informed waiting for their response""","""22/May/23 4:45 AM;61029d08627b560068c8a078;It appears that managed network of the AML workspace below is currently enabled as AllowInternetOutbound mode. In this mode", private endpoints are only created for the default Key Vault of the workspace and storge accounts with Public Network Access (PNA) disabled to save costs. By default, storage accounts are PNA enabled. Can you look at the Networking blade of the storage account (mlwdevmnstorage4c64e9789) to confirm that is the case? When PNA of the storage account is disabled, it can only be accessed from computes in the workspace.
""
 
""
When the workspace managed network is set to AllowOnlyApprovedOutbound mode, private endpoints will be created for the workspace, key vault, storage accounts and other resources associated with the workspace. Computes in the workspace can only access these resources unless additional outbound rules are specified to allow other outbound destinations.
""
 
""
"We are going to have the GUI update to support workspace managed network soon. It will make configuration easier.""",22/May/23 6:08 AM;61029d08627b560068c8a078;Try to schedule a pipeline on the workspace with managed VNet to see if it works,31/May/23 8:53 AM;6405ed610e0ddcdce18e3980;Waiting for response from Microsoft,19/Jun/23 4:40 AM;6405ed610e0ddcdce18e3980;Waiting for a response from the Microsoft,126013,Multitenancy Stream,In Progress
#2302010050001323 - Managed Online Deployment shows Failed state,ITSMS-3,124703,Story,Dropped,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,Done,Pawel Borowiak,6405ed610e0ddcdce18e3980,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,11/Apr/23 8:06 AM,02/Jun/23 11:29 AM,07/Jun/23 7:41 AM,02/Jun/23 11:29 AM,,0,"""h3. Ticket link"
""
[Support Request: Managed Online Deployment shows Failed state - Microsoft Azure|https://portal.azure.com/#view/Microsoft_Azure_Support/SupportRequestDetails.ReactView/id/%2fsubscriptions%2f27c0a03b-f477-4c6d-b9a9-608e91d2e83b%2fproviders%2fMicrosoft.Support%2fsupportTickets%2f2302010050001323/portalJourney~/true]
""
h3. Issue Description
""
Online Deployment shows Failed provisioning state, but they're forking fine.
""
"More details in the attachment""",,Pawel Borowiak,Szymon Osiecki,6405ed610e0ddcdce18e3980,61029d08627b560068c8a078,,,,,,,,,,11/Apr/23 8:10 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;Managed Online Deployment Failed State.pdf;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/21916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0eme9:,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-05-24 11:24:14.259,,24/May/23 7:24 AM;6405ed610e0ddcdce18e3980;Ticket is open. Szymon ping Madiha via Teams that issue still occurs. ,31/May/23 8:53 AM;6405ed610e0ddcdce18e3980;Waiting for a response from Madiha.,01/Jun/23 10:20 AM;61029d08627b560068c8a078;We will create new ticket for the same issue.,,,,,124700,Support Tickets,Done
#2301240050002430 - Cannot access Jupyter notebook in AML workspace,ITSMS-2,124702,Story,Blocked,ITSMS,AIF ITS Microsoft,software,Natalia Klimpel,62557e9c410206006e966da3,,,Medium,,Tomasz Zagorowicz,62c7ec27b6357aecd7c7e693,Szymon Osiecki,61029d08627b560068c8a078,Szymon Osiecki,61029d08627b560068c8a078,11/Apr/23 8:06 AM,19/Jun/23 5:47 AM,28/Jun/23 9:34 AM,,,0,"""h3. Ticket link"
""
[Support Request: Cannot access Jupyter notebook in AML workspace - Microsoft Azure|https://portal.azure.com/#view/Microsoft_Azure_Support/SupportRequestDetails.ReactView/id/%2fsubscriptions%2f4a4e68bf-6a30-454d-ab2d-3bc514a605d7%2fproviders%2fMicrosoft.Support%2fsupportTickets%2f2301240050002430/portalJourney~/true]
""
h3. Description
""
* Question: What are your networking configurations / What firewalls do you have applied?
Answer: AML workspace secured with private endpoints, being accessed from VNet connected with PE
* Question: What permissions do you have (owner, contributor, or custom role)? For custom roles, list all actions you have enabled
Answer: Owner without: 'roleDefinitions/write|delete', '/elevateAccess/Action', '/blueprintAssignments/write|delete'
* Question: What is the error message and correlation ID?
Answer: Notebook not available message
* Question: Details
Answer: Notebook is not being rendered in AML workspace. I have a message 'Notebook not available'. I have access to terminal of the compute instance though. I can also run the notebook in the Jupyter.
""
"230124 - Cannot access Jupyter notebook in AML workspace  ([Web view|https://pgone.sharepoint.com/sites/MLOpsonAzure/_layouts/OneNote.aspx?id=%2Fsites%2FMLOpsonAzure%2FSiteAssets%2FMLOps%20on%20Azure%20Notebook&wd=target%28Issues.one%7C0F71E560-2ACA-43AA-B479-80486109C439%2F230124%20-%20Cannot%20access%20Jupyter%20notebook%20in%20AML%20workspace%7C2E4A7977-EB4E-4F78-8D78-084F53143312%2F%29])""",,Szymon Osiecki,Tomasz Zagorowicz,61029d08627b560068c8a078,62c7ec27b6357aecd7c7e693,,,,,,,,,,11/Apr/23 8:10 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;Notebook in AML not working.pdf;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/21917,27/Apr/23 8:00 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230427-120036.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/22296,27/Apr/23 8:12 AM;ug:2b10ad08-2990-4dbe-828d-61c962aafa4a;image-20230427-121254.png;https://jira-pg-ds.atlassian.net/rest/api/3/attachment/content/22298,,,,,Ticket resolved,,,,,,,,,,,,,,,,,,,,,,,,,{},,,,ITSMS-1,Support Tickets,,,,"""No"," I have not read the documentation""",,purple,,,,,,,,,1|i0e4o5:i,,,,,,,,,,,,,,,,,,,,,,,,Something else,2023-05-22 10:05:32.073,,20/Apr/23 10:38 AM;61029d08627b560068c8a078;Send Madiha examples of working and non-working AML workspaces with Jupyter notebooks from all subscriptions.,27/Apr/23 7:45 AM;61029d08627b560068c8a078;[Use custom DNS server - Azure Machine Learning | Microsoft Learn|https://learn.microsoft.com/en-us/azure/machine-learning/how-to-custom-dns?tabs=azure-cli&view=azureml-api-2#example-custom-dns-server-hosted-on-premises],"""27/Apr/23 8:00 AM;61029d08627b560068c8a078;!image-20230427-120036.png|width=1156","height=477!""","""27/Apr/23 8:12 AM;61029d08627b560068c8a078;!image-20230427-121254.png|width=3572","height=1810!""",22/May/23 6:05 AM;62c7ec27b6357aecd7c7e693;As per Tomasz Trybiec suggestion we should include Kim Honardo [honrado.k@pg.com|mailto:honrado.k@pg.com] to discussion,,,124700,Support Tickets,In Progress
""
